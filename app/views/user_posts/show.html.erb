<% provide(:title, "投稿詳細") %>
<div class="row">
  <div class="col-md-12">
    <div class="my-3 p-3 bg-white rounded shadow-sm">
    <div class="media text-muted pt-3">
      <%= link_to user_path(@user_post.user_id) do %>
				<%= attachment_image_tag(@user_post.user, :image, size:'80x80', fallback: "no_image.png", size:'80x80' )%>
			<% end %>
      <div class="media-body pb-3 mb-1 small lh-125 border-bottom border-gray">
        <div class="row mb-1">
          <strong class="d-block text-gray-dark col-md-2" ><%= @user_post.user.name %></strong>
          <div class="col-md-2">
            <%= time_ago_in_words(@user_post.created_at) %>
          </div>
        </div>
        <%= attachment_image_tag @user_post, :image,size: '300x300', class: "mb-1 ml-1"%>
        <br>
        <span class="ml-1"><%= @user_post.content %></span>
        <div class="row ml-2 mt-1">
          <div class="mr-1">
            <%= render "post_favorite", post: @user_post %>
          </div>
          <%= link_to user_post_path(@user_post.id) do %>
          <i class="fas fa-comments" aria-hidden="true"></i>
          <%= @user_post.user_post_comments.count %>
          <% end %>
          <% if @user_post.user == current_user %>
            <%= link_to edit_user_post_path(@user_post) do %>
            <i class="fas fa-edit ml-1" aria-hidden="true"></i>
            <% end %>
            <%= link_to user_post_path(@user_post), method: :delete, data: {confirm: "削除しますか？"}  do%>
            <i class="fas fa-trash-alt ml-1" aria-hidden="true"></i>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
    <!--コメント-->
    <div>
        <h6 class="border-bottom border-gray pb-2 mb-0">コメント</h6>
        <%= form_with model:[@user_post,@post_comment], local:true do |f| %>
        <%= f.text_area :comment, class:"form-control", rows:"1", placeholder:"コメント" %>
        <%= f.submit "送信", class:"btn btn-base-1 mt-10" %>
      <% end %>
    </div>
    <% @user_post.user_post_comments.each do |post| %>
    <div class="media text-muted pt-3">
      <%= link_to user_path(post.user_id) do %>
				<%= attachment_image_tag(post.user, :image, size:'50x50', fallback: "no_image.png", size:'50x50' )%>
			<% end %>
      <div class="media-body pb-3 mb-1 small lh-125 border-bottom border-gray">
        <div class="row mb-1">
          <strong class="d-block text-gray-dark col-md-2" ><%= post.user.name %></strong>
          <div class="col-md-2">
            <%= time_ago_in_words(post.created_at) %>
          </div>
          <div class="col-md-1">
            <% if post.user == current_user %>
              <%= link_to user_post_user_post_comment_path(post.id), method: :delete, data: {confirm: "削除しますか？"}  do%>
                <i class="fas fa-trash-alt ml-1" aria-hidden="true"></i>
              <% end %>
            <% end %>
          </div>
        </div>
        <%= post.comment %>
      </div>
    </div>
    <% end %>
    <small class="d-block text-right mt-3">
      <a href="#">All updates</a>
    </small>
    </div>
  </div>
</div>
